!function(e,t,o,n){"use strict";var s={};s.settings={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",loadingIcon:"glyphicon glyphicon-hourglass",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",partiallyCheckedIcon:"glyphicon glyphicon-expand",uncheckedIcon:"glyphicon glyphicon-unchecked",tagsClass:"badge",color:void 0,backColor:void 0,borderColor:void 0,changedNodeColor:"#39A5DC",onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:void 0,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showImage:!1,showCheckbox:!1,checkboxFirst:!1,highlightChanges:!1,showTags:!1,showActions:!0,multiSelect:!1,preventUnselect:!1,allowReselect:!1,hierarchicalCheck:!1,propagateCheckEvent:!1,wrapNodeText:!1,onLoading:void 0,onLoadingFailed:void 0,onInitialized:void 0,onNodeRendered:void 0,onRendered:void 0,onDestroyed:void 0,onNodeChecked:void 0,onNodeCollapsed:void 0,onNodeDisabled:void 0,onNodeEnabled:void 0,onNodeExpanded:void 0,onNodeSelected:void 0,onNodeUnchecked:void 0,onNodeUnselected:void 0,onNodeHover:void 0,onSearchComplete:void 0,onSearchCleared:void 0},s.options={silent:!1,ignoreChildren:!1},s.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0},s.dataUrl={method:"GET",dataType:"json",cache:!1};var i=function(t,o){return this.$element=e(t),this._elementId=t.id,this._styleId=this._elementId+"-style",this._init(o),{options:this._options,init:e.proxy(this._init,this),remove:e.proxy(this._remove,this),findNodes:e.proxy(this.findNodes,this),getNodes:e.proxy(this.getNodes,this),getParents:e.proxy(this.getParents,this),getSiblings:e.proxy(this.getSiblings,this),getSelected:e.proxy(this.getSelected,this),getUnselected:e.proxy(this.getUnselected,this),getExpanded:e.proxy(this.getExpanded,this),getCollapsed:e.proxy(this.getCollapsed,this),getChecked:e.proxy(this.getChecked,this),getUnchecked:e.proxy(this.getUnchecked,this),getDisabled:e.proxy(this.getDisabled,this),getEnabled:e.proxy(this.getEnabled,this),addNode:e.proxy(this.addNode,this),addNodeAfter:e.proxy(this.addNodeAfter,this),addNodeBefore:e.proxy(this.addNodeBefore,this),removeNode:e.proxy(this.removeNode,this),updateNode:e.proxy(this.updateNode,this),selectNode:e.proxy(this.selectNode,this),unselectNode:e.proxy(this.unselectNode,this),toggleNodeSelected:e.proxy(this.toggleNodeSelected,this),collapseAll:e.proxy(this.collapseAll,this),collapseNode:e.proxy(this.collapseNode,this),expandAll:e.proxy(this.expandAll,this),expandNode:e.proxy(this.expandNode,this),toggleNodeExpanded:e.proxy(this.toggleNodeExpanded,this),revealNode:e.proxy(this.revealNode,this),checkAll:e.proxy(this.checkAll,this),checkNode:e.proxy(this.checkNode,this),uncheckAll:e.proxy(this.uncheckAll,this),uncheckNode:e.proxy(this.uncheckNode,this),toggleNodeChecked:e.proxy(this.toggleNodeChecked,this),unmarkCheckboxChanges:e.proxy(this.unmarkCheckboxChanges,this),disableAll:e.proxy(this.disableAll,this),disableNode:e.proxy(this.disableNode,this),enableAll:e.proxy(this.enableAll,this),enableNode:e.proxy(this.enableNode,this),toggleNodeDisabled:e.proxy(this.toggleNodeDisabled,this),search:e.proxy(this.search,this),clearSearch:e.proxy(this.clearSearch,this)}};i.prototype._init=function(t){this._tree=[],this._initialized=!1,this._options=e.extend({},s.settings,t),this._template.icon.empty.addClass(this._options.emptyIcon),this._destroy(),this._subscribeEvents(),this._triggerEvent("loading",null,s.options),this._load(t).then(e.proxy(function(t){return this._tree=e.extend(!0,[],t)},this),e.proxy(function(e){this._triggerEvent("loadingFailed",e,s.options)},this)).then(e.proxy(function(e){return this._setInitialStates({nodes:e},0)},this)).then(e.proxy(function(){this._render()},this))},i.prototype._load=function(t){var o=new e.Deferred;return t.data?this._loadLocalData(t,o):t.dataUrl&&this._loadRemoteData(t,o),o.promise()},i.prototype._loadRemoteData=function(t,o){e.ajax(e.extend(!0,{},s.dataUrl,t.dataUrl)).done(function(e){o.resolve(e)}).fail(function(e,t,n){o.reject(n)})},i.prototype._loadLocalData=function(t,o){o.resolve("string"==typeof t.data?JSON.parse(t.data):e.extend(!0,[],t.data))},i.prototype._remove=function(){this._destroy(),e.removeData(this,"treeview"),e("#"+this._styleId).remove()},i.prototype._destroy=function(){this._initialized&&(this._initialized=!1,this._triggerEvent("destroyed",null,s.options),this._unsubscribeEvents(),this.$wrapper.remove(),this.$wrapper=null)},i.prototype._unsubscribeEvents=function(){this.$element.off("loading"),this.$element.off("loadingFailed"),this.$element.off("initialized"),this.$element.off("nodeRendered"),this.$element.off("rendered"),this.$element.off("destroyed"),this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},i.prototype._subscribeEvents=function(){this._unsubscribeEvents(),"function"==typeof this._options.onLoading&&this.$element.on("loading",this._options.onLoading),"function"==typeof this._options.onLoadingFailed&&this.$element.on("loadingFailed",this._options.onLoadingFailed),"function"==typeof this._options.onInitialized&&this.$element.on("initialized",this._options.onInitialized),"function"==typeof this._options.onNodeRendered&&this.$element.on("nodeRendered",this._options.onNodeRendered),"function"==typeof this._options.onRendered&&this.$element.on("rendered",this._options.onRendered),"function"==typeof this._options.onDestroyed&&this.$element.on("destroyed",this._options.onDestroyed),this.$element.on("click",e.proxy(this._clickHandler,this)),"function"==typeof this._options.onNodeChecked&&this.$element.on("nodeChecked",this._options.onNodeChecked),"function"==typeof this._options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this._options.onNodeCollapsed),"function"==typeof this._options.onNodeDisabled&&this.$element.on("nodeDisabled",this._options.onNodeDisabled),"function"==typeof this._options.onNodeEnabled&&this.$element.on("nodeEnabled",this._options.onNodeEnabled),"function"==typeof this._options.onNodeExpanded&&this.$element.on("nodeExpanded",this._options.onNodeExpanded),"function"==typeof this._options.onNodeSelected&&this.$element.on("nodeSelected",this._options.onNodeSelected),"function"==typeof this._options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this._options.onNodeUnchecked),"function"==typeof this._options.onNodeUnselected&&this.$element.on("nodeUnselected",this._options.onNodeUnselected),"function"==typeof this._options.onSearchComplete&&this.$element.on("searchComplete",this._options.onSearchComplete),"function"==typeof this._options.onSearchCleared&&this.$element.on("searchCleared",this._options.onSearchCleared)},i.prototype._triggerEvent=function(t,o,n){n&&!n.silent&&this.$element.trigger(t,e.extend(!0,{},o))},i.prototype._setInitialStates=function(t,o){return this._nodes={},e.when.apply(this,this._setInitialState(t,o)).done(e.proxy(function(){this._orderedNodes=this._sortNodes(),this._inheritCheckboxChanges(),this._triggerEvent("initialized",this._orderedNodes,s.options)},this))},i.prototype._setInitialState=function(t,o,n){if(t.nodes){o+=1,n=n||[];var s=t;return e.each(t.nodes,e.proxy(function(t,i){var d=new e.Deferred;n.push(d.promise()),i.level=o,i.index=t,i.nodeId=s&&s.nodeId?s.nodeId+"."+i.index:o-1+"."+i.index,i.parentId=s.nodeId,i.hasOwnProperty("selectable")||(i.selectable=!0),i.hasOwnProperty("checkable")||(i.checkable=!0),i.state=i.state||{},i.state.hasOwnProperty("checked")||(i.state.checked=!1),this._options.hierarchicalCheck&&"undefined"===i.state.checked&&(i.state.checked=void 0),i.state.hasOwnProperty("disabled")||(i.state.disabled=!1),i.state.hasOwnProperty("expanded")||(!i.state.disabled&&o<this._options.levels&&i.nodes&&i.nodes.length>0?i.state.expanded=!0:i.state.expanded=!1),i.state.hasOwnProperty("selected")||(i.state.selected=!1),s&&s.state&&s.state.expanded||o<=this._options.levels?i.state.visible=!0:i.state.visible=!1,i.nodes&&(i.nodes.length>0?this._setInitialState(i,o,n):delete i.nodes),this._nodes[i.nodeId]=i,d.resolve()},this)),n}},i.prototype._sortNodes=function(){return e.map(Object.keys(this._nodes).sort(function(e,t){if(e===t)return 0;for(var e=e.split(".").map(function(e){return parseInt(e)}),t=t.split(".").map(function(e){return parseInt(e)}),o=Math.max(e.length,t.length),n=0;n<o;n++){if(void 0===e[n])return-1;if(void 0===t[n])return 1;if(e[n]-t[n]>0)return 1;if(e[n]-t[n]<0)return-1}}),e.proxy(function(e,t){return this._nodes[e]},this))},i.prototype._clickHandler=function(t){var o=e(t.target),n=this.targetNode(o);if(n&&!n.state.disabled){var i=o.attr("class")?o.attr("class").split(" "):[];-1!==i.indexOf("expand-icon")?this._toggleExpanded(n,e.extend({},s.options)):-1!==i.indexOf("check-icon")?n.checkable&&this._toggleChecked(n,e.extend({},s.options)):-1!==i.indexOf("tree-node-action")||(n.selectable?this._toggleSelected(n,e.extend({},s.options)):this._toggleExpanded(n,e.extend({},s.options)))}},i.prototype.targetNode=function(e){var t=e.closest("li.list-group-item").attr("data-nodeId"),o=this._nodes[t];return o||console.log("Error: node does not exist"),o},i.prototype._toggleExpanded=function(e,t){e&&("function"==typeof this._options.lazyLoad&&e.lazyLoad?this._lazyLoad(e):this._setExpanded(e,!e.state.expanded,t))},i.prototype._lazyLoad=function(e){e.$el.children("span.expand-icon").removeClass(this._options.expandIcon).addClass(this._options.loadingIcon);var t=this;this._options.lazyLoad(e,function(o){t.addNode(o,e)}),delete e.lazyLoad},i.prototype._setExpanded=function(t,o,n){n&&o===t.state.expanded||(o&&t.nodes?(t.state.expanded=!0,t.$el&&t.$el.children("span.expand-icon").removeClass(this._options.expandIcon).removeClass(this._options.loadingIcon).addClass(this._options.collapseIcon),t.nodes&&n&&e.each(t.nodes,e.proxy(function(e,t){this._setVisible(t,!0,n)},this)),this._triggerEvent("nodeExpanded",t,n)):o||(t.state.expanded=!1,t.$el&&t.$el.children("span.expand-icon").removeClass(this._options.collapseIcon).addClass(this._options.expandIcon),t.nodes&&n&&e.each(t.nodes,e.proxy(function(e,t){this._setVisible(t,!1,n),this._setExpanded(t,!1,n)},this)),this._triggerEvent("nodeCollapsed",t,n)))},i.prototype._setVisible=function(e,t,o){o&&t===e.state.visible||(t?(e.state.visible=!0,e.$el&&e.$el.removeClass("node-hidden")):(e.state.visible=!1,e.$el&&e.$el.addClass("node-hidden")))},i.prototype._toggleSelected=function(e,t){if(e)return this._setSelected(e,!e.state.selected,t),this},i.prototype._setSelected=function(t,o,n){if(!n||o!==t.state.selected){if(o)this._options.multiSelect||e.each(this._findNodes("true","state.selected"),e.proxy(function(t,o){this._setSelected(o,!1,e.extend(n,{unselecting:!0}))},this)),t.state.selected=!0,t.$el&&(t.$el.addClass("node-selected"),(t.selectedIcon||this._options.selectedIcon)&&t.$el.children("span.node-icon").removeClass(t.icon||this._options.nodeIcon).addClass(t.selectedIcon||this._options.selectedIcon)),this._triggerEvent("nodeSelected",t,n);else{if(this._options.preventUnselect&&n&&!n.unselecting&&1===this._findNodes("true","state.selected").length)return this._options.allowReselect&&this._triggerEvent("nodeSelected",t,n),this;t.state.selected=!1,t.$el&&(t.$el.removeClass("node-selected"),(t.selectedIcon||this._options.selectedIcon)&&t.$el.children("span.node-icon").removeClass(t.selectedIcon||this._options.selectedIcon).addClass(t.icon||this._options.nodeIcon)),this._triggerEvent("nodeUnselected",t,n)}return this}},i.prototype._inheritCheckboxChanges=function(){this._options.showCheckbox&&this._options.highlightChanges&&(this._checkedNodes=e.grep(this._orderedNodes,function(e){return e.state.checked}))},i.prototype._toggleChecked=function(t,o){if(t){if(this._options.hierarchicalCheck){var n,s=e.extend({},o,{silent:o.silent||!this._options.propagateCheckEvent}),i=t;for(t.state.checked=!t.state.checked;i=this._nodes[i.parentId];)n=i.nodes.reduce(function(e,t){return e===t.state.checked?e:void 0},i.nodes[0].state.checked),this._setChecked(i,n,s);if(t.nodes&&t.nodes.length>0)for(var d,a=t.nodes.slice();a&&a.length>0;)d=a.pop(),this._setChecked(d,t.state.checked,s),d.nodes&&d.nodes.length>0&&(a=a.concat(d.nodes.slice()));t.state.checked=!t.state.checked}this._setChecked(t,!t.state.checked,o)}},i.prototype._setChecked=function(e,t,o){o&&t===e.state.checked||(this._options.highlightChanges&&e.$el.toggleClass("node-check-changed",-1==this._checkedNodes.indexOf(e)==t),t?(e.state.checked=!0,e.$el&&(e.$el.addClass("node-checked").removeClass("node-checked-partial"),e.$el.children("span.check-icon").removeClass(this._options.uncheckedIcon).removeClass(this._options.partiallyCheckedIcon).addClass(this._options.checkedIcon)),this._triggerEvent("nodeChecked",e,o)):void 0===t&&this._options.hierarchicalCheck?(e.state.checked=void 0,e.$el&&(e.$el.addClass("node-checked-partial").removeClass("node-checked"),e.$el.children("span.check-icon").removeClass(this._options.uncheckedIcon).removeClass(this._options.checkedIcon).addClass(this._options.partiallyCheckedIcon)),this._triggerEvent("nodeUnchecked",e,o)):(e.state.checked=!1,e.$el&&(e.$el.removeClass("node-checked node-checked-partial"),e.$el.children("span.check-icon").removeClass(this._options.checkedIcon).removeClass(this._options.partiallyCheckedIcon).addClass(this._options.uncheckedIcon)),this._triggerEvent("nodeUnchecked",e,o)))},i.prototype._setDisabled=function(e,t,o){o&&t===e.state.disabled||(t?(e.state.disabled=!0,o&&!o.keepState&&(this._setSelected(e,!1,o),this._setChecked(e,!1,o),this._setExpanded(e,!1,o)),e.$el&&e.$el.addClass("node-disabled"),this._triggerEvent("nodeDisabled",e,o)):(e.state.disabled=!1,e.$el&&e.$el.removeClass("node-disabled"),this._triggerEvent("nodeEnabled",e,o)))},i.prototype._setSearchResult=function(e,t,o){o&&t===e.searchResult||(t?(e.searchResult=!0,e.$el&&e.$el.addClass("node-result")):(e.searchResult=!1,e.$el&&e.$el.removeClass("node-result")))},i.prototype._render=function(){this._initialized||(this.$wrapper=this._template.tree.clone(),this.$element.empty().addClass("treeview").append(this.$wrapper),this._injectStyle(),this._initialized=!0);var t;e.each(this._orderedNodes,e.proxy(function(e,o){this._renderNode(o,t),t=o},this)),this._triggerEvent("rendered",this._orderedNodes,s.options)},i.prototype._renderNode=function(t,o){if(t){t.$el?t.$el.empty():t.$el=this._newNodeEl(t,o).addClass("node-"+this._elementId),t.$el.addClass(t.class),t.id&&t.$el.attr("id",t.id),t.dataAttr&&e.each(t.dataAttr,function(e,o){t.$el.attr("data-"+e,o)}),t.$el.attr("data-nodeId",t.nodeId),t.tooltip&&t.$el.attr("title",t.tooltip);for(var n=0;n<t.level-1;n++)t.$el.append(this._template.indent.clone());if(t.$el.append(t.nodes||t.lazyLoad?this._template.icon.expand.clone():this._template.icon.empty.clone()),this._options.checkboxFirst?(this._addCheckbox(t),this._addIcon(t),this._addImage(t)):(this._addIcon(t),this._addImage(t),this._addCheckbox(t)),this._options.wrapNodeText){var i=this._template.text.clone();t.$el.append(i),i.append(t.text)}else t.$el.append(t.text);if(this._options.showTags&&t.tags&&e.each(t.tags,e.proxy(function(e,o){t.$el.append(this._template.badge.clone().addClass(("object"==typeof o?o.class:void 0)||t.tagsClass||this._options.tagsClass).append(("object"==typeof o?o.text:void 0)||o))},this)),this._setSelected(t,t.state.selected),this._setChecked(t,t.state.checked),this._setSearchResult(t,t.searchResult),this._setExpanded(t,t.state.expanded),this._setDisabled(t,t.state.disabled),this._setVisible(t,t.state.visible),"function"==typeof this._options.onNodeHover){var d=this._options.onNodeHover;t.$el.on("mouseenter mouseleave",function(e){d(e,t)})}this._triggerEvent("nodeRendered",t,s.options)}},i.prototype._addCheckbox=function(e){!this._options.showCheckbox||void 0!==e.hideCheckbox&&!1!==e.hideCheckbox||e.$el.append(this._template.icon.check.clone())},i.prototype._addIcon=function(e){!this._options.showIcon||this._options.showImage&&e.image||e.$el.append(this._template.icon.node.clone().addClass(e.icon||this._options.nodeIcon))},i.prototype._addImage=function(e){this._options.showImage&&e.image&&e.$el.append(this._template.image.clone().addClass("node-image").css("background-image","url('"+e.image+"')"))},i.prototype._newNodeEl=function(e,t){var o=this._template.node.clone();return t?t.$el.after(o):this.$wrapper.prepend(o),o},i.prototype._removeNodeEl=function(t){t&&(t.nodes&&e.each(t.nodes,e.proxy(function(e,t){this._removeNodeEl(t)},this)),t.$el.remove())},i.prototype._expandNode=function(t){t.nodes&&e.each(t.nodes.slice(0).reverse(),e.proxy(function(e,o){o.level=t.level+1,this._renderNode(o,t.$el)},this))},i.prototype._injectStyle=function(){this._options.injectStyle&&!o.getElementById(this._styleId)&&e('<style type="text/css" id="'+this._styleId+'"> '+this._buildStyle()+" </style>").appendTo("head")},i.prototype._buildStyle=function(){var t=".node-"+this._elementId+"{";if(this._options.color&&(t+="color:"+this._options.color+";"),this._options.backColor&&(t+="background-color:"+this._options.backColor+";"),this._options.showBorder?this._options.borderColor&&(t+="border:1px solid "+this._options.borderColor+";"):t+="border:none;",t+="}",this._options.onhoverColor&&(t+=".node-"+this._elementId+":not(.node-disabled):hover{background-color:"+this._options.onhoverColor+";}"),this._options.highlightSearchResults&&(this._options.searchResultColor||this._options.searchResultBackColor)){var o="";this._options.searchResultColor&&(o+="color:"+this._options.searchResultColor+";"),this._options.searchResultBackColor&&(o+="background-color:"+this._options.searchResultBackColor+";"),t+=".node-"+this._elementId+".node-result{"+o+"}",t+=".node-"+this._elementId+".node-result:hover{"+o+"}"}if(this._options.highlightSelected&&(this._options.selectedColor||this._options.selectedBackColor)){var o="";this._options.selectedColor&&(o+="color:"+this._options.selectedColor+";"),this._options.selectedBackColor&&(o+="background-color:"+this._options.selectedBackColor+";"),t+=".node-"+this._elementId+".node-selected{"+o+"}",t+=".node-"+this._elementId+".node-selected:hover{"+o+"}"}if(this._options.highlightChanges){var o="color: "+this._options.changedNodeColor+";";t+=".node-"+this._elementId+".node-check-changed{"+o+"}"}return e.each(this._orderedNodes,e.proxy(function(e,o){if(o.color||o.backColor){var n="";o.color&&(n+="color:"+o.color+";"),o.backColor&&(n+="background-color:"+o.backColor+";"),t+=".node-"+this._elementId+'[data-nodeId="'+o.nodeId+'"]{'+n+"}"}if(o.iconColor){var n="color:"+o.iconColor+";";t+=".node-"+this._elementId+'[data-nodeId="'+o.nodeId+'"] .node-icon{'+n+"}"}},this)),this._css+t},i.prototype._template={tree:e('<ul class="list-group"></ul>'),node:e('<li class="list-group-item"></li>'),indent:e('<span class="indent"></span>'),icon:{node:e('<span class="icon node-icon"></span>'),expand:e('<span class="icon expand-icon"></span>'),check:e('<span class="icon check-icon"></span>'),empty:e('<span class="icon"></span>')},image:e('<span class="image"></span>'),badge:e("<span></span>"),text:e('<span class="text"></span>')},i.prototype._css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",i.prototype.findNodes=function(e,t){return this._findNodes(e,t)},i.prototype.getNodes=function(){return this._orderedNodes},i.prototype.getParents=function(t){t instanceof Array||(t=[t]);var o=[];return e.each(t,e.proxy(function(e,t){var n=!!t.parentId&&this._nodes[t.parentId];n&&o.push(n)},this)),o},i.prototype.getSiblings=function(t){t instanceof Array||(t=[t]);var o=[];return e.each(t,e.proxy(function(e,t){var n=this.getParents([t]),s=n[0]?n[0].nodes:this._tree;o=s.filter(function(e){return e.nodeId!==t.nodeId})},this)),e.map(o,function(e){return e})},i.prototype.getSelected=function(){return this._findNodes("true","state.selected")},i.prototype.getUnselected=function(){return this._findNodes("false","state.selected")},i.prototype.getExpanded=function(){return this._findNodes("true","state.expanded")},i.prototype.getCollapsed=function(){return this._findNodes("false","state.expanded")},i.prototype.getChecked=function(){return this._findNodes("true","state.checked")},i.prototype.getUnchecked=function(){return this._findNodes("false","state.checked")},i.prototype.getDisabled=function(){return this._findNodes("true","state.disabled")},i.prototype.getEnabled=function(){return this._findNodes("false","state.disabled")},i.prototype.addNode=function(t,o,n,i){t instanceof Array||(t=[t]),o instanceof Array&&(o=o[0]),i=e.extend({},s.options,i);var d;d=o&&o.nodes?o.nodes:o?o.nodes=[]:this._tree,e.each(t,e.proxy(function(e,t){var o="number"==typeof n?n+e:d.length+1;d.splice(o,0,t)},this)),this._setInitialStates({nodes:this._tree},0).done(e.proxy(function(){o&&!o.state.expanded&&this._setExpanded(o,!0,i),this._render()},this))},i.prototype.addNodeAfter=function(t,o,n){t instanceof Array||(t=[t]),o instanceof Array&&(o=o[0]),n=e.extend({},s.options,n),this.addNode(t,this.getParents(o)[0],o.index+1,n)},i.prototype.addNodeBefore=function(t,o,n){t instanceof Array||(t=[t]),o instanceof Array&&(o=o[0]),n=e.extend({},s.options,n),this.addNode(t,this.getParents(o)[0],o.index,n)},i.prototype.removeNode=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o);var n,i;e.each(t,e.proxy(function(e,t){i=this._nodes[t.parentId],n=i?i.nodes:this._tree,n.splice(t.index,1),this._removeNodeEl(t)},this)),this._setInitialStates({nodes:this._tree},0).done(this._render.bind(this))},i.prototype.updateNode=function(t,o,n){t instanceof Array&&(t=t[0]),n=e.extend({},s.options,n);var i,d=this._nodes[t.parentId];i=d?d.nodes:this._tree,i.splice(t.index,1,o),this._removeNodeEl(t),this._setInitialStates({nodes:this._tree},0).done(this._render.bind(this))},i.prototype.selectNode=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){this._setSelected(t,!0,o)},this))},i.prototype.unselectNode=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){this._setSelected(t,!1,o)},this))},i.prototype.toggleNodeSelected=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){this._toggleSelected(t,o)},this))},i.prototype.collapseAll=function(t){t=e.extend({},s.options,t),t.levels=t.levels||999,this.collapseNode(this._tree,t)},i.prototype.collapseNode=function(t,o){o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){this._setExpanded(t,!1,o)},this))},i.prototype.expandAll=function(t){t=e.extend({},s.options,t),t.levels=t.levels||999,this.expandNode(this._tree,t)},i.prototype.expandNode=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){t.state.expanded||("function"==typeof this._options.lazyLoad&&t.lazyLoad&&this._lazyLoad(t),this._setExpanded(t,!0,o),t.nodes&&this._expandLevels(t.nodes,o.levels-1,o))},this))},i.prototype._expandLevels=function(t,o,n){t instanceof Array||(t=[t]),n=e.extend({},s.options,n),e.each(t,e.proxy(function(e,t){this._setExpanded(t,o>0,n),t.nodes&&this._expandLevels(t.nodes,o-1,n)},this))},i.prototype.revealNode=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){for(var n,s=t;n=this.getParents([s])[0];)s=n,this._setExpanded(s,!0,o)},this))},i.prototype.toggleNodeExpanded=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){this._toggleExpanded(t,o)},this))},i.prototype.checkAll=function(t){t=e.extend({},s.options,t);var o=e.grep(this._orderedNodes,function(e){return!e.state.checked});e.each(o,e.proxy(function(e,o){this._setChecked(o,!0,t)},this))},i.prototype.checkNode=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){this._setChecked(t,!0,o)},this))},i.prototype.uncheckAll=function(t){t=e.extend({},s.options,t);var o=e.grep(this._orderedNodes,function(e){return e.state.checked||void 0===e.state.checked});e.each(o,e.proxy(function(e,o){this._setChecked(o,!1,t)},this))},i.prototype.uncheckNode=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){this._setChecked(t,!1,o)},this))},i.prototype.toggleNodeChecked=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){this._toggleChecked(t,o)},this))},i.prototype.unmarkCheckboxChanges=function(){this._inheritCheckboxChanges(),e.each(this._nodes,function(e,t){t.$el.removeClass("node-check-changed")})},i.prototype.disableAll=function(t){t=e.extend({},s.options,t);var o=this._findNodes("false","state.disabled");e.each(o,e.proxy(function(e,o){this._setDisabled(o,!0,t)},this))},i.prototype.disableNode=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){this._setDisabled(t,!0,o)},this))},i.prototype.enableAll=function(t){t=e.extend({},s.options,t);var o=this._findNodes("true","state.disabled");e.each(o,e.proxy(function(e,o){this._setDisabled(o,!1,t)},this))},i.prototype.enableNode=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){this._setDisabled(t,!1,o)},this))},i.prototype.toggleNodeDisabled=function(t,o){t instanceof Array||(t=[t]),o=e.extend({},s.options,o),e.each(t,e.proxy(function(e,t){this._setDisabled(t,!t.state.disabled,o)},this))},i.prototype.search=function(t,o){o=e.extend({},s.searchOptions,o);var n=this._getSearchResults(),i=[];if(t&&t.length>0){o.exactMatch&&(t="^"+t+"$");var d="g";o.ignoreCase&&(d+="i"),i=this._findNodes(t,"text",d)}return e.each(this._diffArray(i,n),e.proxy(function(e,t){this._setSearchResult(t,!1,o)},this)),e.each(this._diffArray(n,i),e.proxy(function(e,t){this._setSearchResult(t,!0,o)},this)),i&&o.revealResults&&this.revealNode(i),this._triggerEvent("searchComplete",i,o),i},i.prototype.clearSearch=function(t){t=e.extend({},{render:!0},t);var o=e.each(this._getSearchResults(),e.proxy(function(e,o){this._setSearchResult(o,!1,t)},this));this._triggerEvent("searchCleared",o,t)},i.prototype._getSearchResults=function(){return this._findNodes("true","searchResult")},i.prototype._diffArray=function(t,o){var n=[];return e.grep(o,function(o){-1===e.inArray(o,t)&&n.push(o)}),n},i.prototype._findNodes=function(t,o,n){return o=o||"text",n=n||"g",e.grep(this._orderedNodes,e.proxy(function(e){var s=this._getNodeValue(e,o);if("string"==typeof s)return s.match(new RegExp(t,n))},this))},i.prototype._getNodeValue=function(e,t){var o=t.indexOf(".");if(o>0){var n=e[t.substring(0,o)],s=t.substring(o+1,t.length);return this._getNodeValue(n,s)}return e.hasOwnProperty(t)&&void 0!==e[t]?e[t].toString():void 0};var d=function(e){t.console&&t.console.error(e)};e.fn.treeview=function(t,o){var n;if(0==this.length)throw"No element has been found!";return this.each(function(){var s=e.data(this,"treeview");"string"==typeof t?s?e.isFunction(s[t])&&"_"!==t.charAt(0)?(o instanceof Array||(o=[o]),n=s[t].apply(s,o)):d("No such method : "+t):d("Not initialized, can not call method : "+t):"boolean"==typeof t?n=s:e.data(this,"treeview",new i(this,e.extend(!0,{},t)))}),n||this}}(jQuery,window,document);