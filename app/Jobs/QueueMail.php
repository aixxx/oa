<?php

namespace App\Jobs;

use App\Mail\WorkflowMail;
use Exception;
use Mail;

class QueueMail extends BaseQueue
{
    /**
     * Execute the job.
     *
     * @return void
     */

    public $receiver = null;
    public $order    = self::QUEUE_ORDER_HIGH_THREE;

    protected $info;

    public function handle()
    {
        $mes = $this->getArguments() ?? $this->info;
        $to  = [$mes['receiver'],];
        Mail::to($to)->send(new WorkflowMail($mes));
    }

    public function failed(Exception $exception)
    {
        parent::failed($exception); // TODO: Change the autogenerated stub
    }
}
